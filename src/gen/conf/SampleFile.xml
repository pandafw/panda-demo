<?xml version="1.0" encoding="UTF-8"?>
<module xmlns="panda.tool.codegen" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="https://raw.github.com/foolite/panda-repo/master/com/foolite/panda-tool/1.0.0/panda-codegen-module.xsd">
	<include>codegen.xml</include>

	<!-- entity -->
	<entity name="${entity.package}.SampleFile" baseBeanClass="${entity.scuBeanClass}" baseQueryClass="${entity.scuQueryClass}" trimString="${entity.trimString}" trimList="${entity.trimList}" identity="id" identityStart="1001">
		<property name="id" type="Long" notNull="true" primaryKey="true"/>
		<property name="name" type="String" size="100" notNull="true" uniqueKey="NAME">
			<validator type="stringlength">
				<param name="maxLength" value="100"/>
			</validator>
		</property>
		<property name="fileData" type="byte[]" jdbcType="BLOB" notNull="false">
			<validator type="filelength">
				<param name="maxLength" value="1048576"/>
				<param name="minLength" value="1"/>
			</validator>
		</property>
		<property name="fileSize" type="Integer" notNull="true"/>
		<property name="imageData" type="byte[]" jdbcType="BLOB" notNull="false">
			<validator type="filelength">
				<param name="maxLength" value="1048576"/>
				<param name="minLength" value="1"/>
			</validator>
		</property>
		<property name="imageSize" type="Integer" notNull="true"/>
		<property name="fileItem" type="FileItem" column="false"/>
		<property name="imageItem" type="FileItem" column="false"/>
	</entity>

	<!-- action -->
	<action name="action.SampleFile" entity="${entity.package}.SampleFile" extend="baseAction">
		<list name="basicList" extend="scuList">
			<column name="id" sortable="true" link="true">
				<filter type="number"/>
			</column>
			<column name="name" sortable="true">
				<filter type="string"/>
			</column>
		</list>
		<input name="basicInput" extend="scuInput">
			<field name="id">
				<editTag name="${tag.viewfield}"/>
			</field>
			<field name="name" required="true">
				<editTag name="${tag.textfield}">
					<param name="maxlength" value="100"/>
					<param name="size" value="${tag.textfield.size}"/>
				</editTag>
			</field>
			<field name="fileSize">
				<editTag name="${tag.hidden}"/>
			</field>
			<field name="fileItem">
				<editTag name="${tag.uploader}">
					<param name="size" value="${tag.uploader.size}"/>
					<param name="uploadAction" value="/tmp/upload"/>
					<param name="uploadName" value="file"/>
					<param name="dnloadAction" value="/tmp/download"/>
					<param name="dnloadName" value="id"/>
					<param name="defaultAction" value="/samplefile/fdownload"/>
					<param name="defaultParams" value="!{'id': '%{r.id}'}"/>
					<param name="defaultEnable" value="%{r.id != null &amp;&amp; r.fileSize > 0}"/>
				</editTag>
			</field>
			<field name="imageSize">
				<editTag name="${tag.hidden}"/>
			</field>
			<field name="imageItem">
				<editTag name="${tag.uploader}">
					<param name="accept" value="image/*"/>
					<param name="size" value="${tag.uploader.size}"/>
					<param name="uploadAction" value="/tmp/upload"/>
					<param name="uploadName" value="file"/>
					<param name="dnloadAction" value="/tmp/download"/>
					<param name="dnloadName" value="id"/>
					<param name="defaultAction" value="/samplefile/idownload"/>
					<param name="defaultParams" value="!{'id': '%{r.id}'}"/>
					<param name="defaultEnable" value="%{r.id != null &amp;&amp; r.imageSize > 0}"/>
				</editTag>
			</field>
		</input>
	</action>
	<action name="samplefile" extend="action.SampleFile" actionClass="${action.package}.samplefile.SampleFileListAction" actionBaseClass="${action.baseListActionClass}" generate="true">
		<list name="list" extend="basicList" template="${template.list}" generate="true"/>
		<list name="list_csv" extend="basicList" template="${template.list_csv}" generate="true"/>
		<list name="list_print" extend="basicList" template="${template.list_print}" generate="true"/>
		<list name="list_popup" extend="basicList" template="${template.list_popup}" generate="true"/>
		<list name="list_json" extend="basicList" template="${template.list_json}" generate="true"/>
		<list name="list_xml" extend="basicList" template="${template.list_xml}" generate="true"/>
	</action>
	<action name="samplefile" auth="${action.auth}" path="${action.context}" extend="action.SampleFile" actionClass="${action.package}.samplefile.SampleFileBulkAction" actionBaseClass="${action.baseBulkActionClass}" generate="true">
		<list name="bdelete" extend="basicList" template="${template.bdelete}" generate="true"/>
	</action>
	<action name="samplefile" extend="action.SampleFile" actionClass="${action.package}.samplefile.SampleFileEditAction" actionBaseClass="${action.baseEditActionClass}" generate="true">
		<input name="view" extend="basicInput" template="${template.view}" generate="true">
			<param name="toolbar" value="${view.toolbar}"/>
			<param name="actions" value="${view.actions}"/>
		</input>
		<input name="print" extend="basicInput" template="${template.print}" generate="true"/>
		<input name="copy" extend="basicInput" template="${template.copy}" generate="true"/>
		<input name="add" extend="basicInput" template="${template.add}" generate="true"/>
		<input name="edit" extend="basicInput" template="${template.edit}" generate="true"/>
		<input name="delete" extend="basicInput" template="${template.delete}" generate="true">
			<param name="toolbar" value="${delete.toolbar}"/>
			<param name="actions" value="${delete.actions}"/>
		</input>
	</action>

	<!-- resource -->
	<resource>
		<entity name="${entity.package}.SampleFile">
			<property name="name" label="Name"/>
			<property name="fileItem" label="File"/>
			<property name="imageItem" label="Image"/>
		</entity>
		<action name="samplefile" title="File Sample"/>
	</resource>
	<resource locale="ja">
		<entity name="${entity.package}.SampleFile">
			<property name="name" label="NAME名称"/>
			<property name="fileItem" label="ファイル"/>
			<property name="imageItem" label="イメージ"/>
		</entity>
		<action name="samplefile" title="ファイルサンプル"/>
	</resource>
	<resource locale="zh">
		<entity name="${entity.package}.SampleFile">
			<property name="name" label="NAME名称"/>
			<property name="fileItem" label="文件"/>
			<property name="imageItem" label="图片"/>
		</entity>
		<action name="samplefile" title="文件样本"/>
	</resource>
</module>
